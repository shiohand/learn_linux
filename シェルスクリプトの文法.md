# シェルスクリプトの文法
- [基本](#基本)
- [変数](#変数)
  - [変数の定義](#変数の定義)
  - [export スクリプトをまたぐ変数の利用](#export-スクリプトをまたぐ変数の利用)
  - [read 標準入力から値を代入](#read-標準入力から値を代入)
  - [set env unset 変数の確認と削除](#set-env-unset-変数の確認と削除)
- [文字列](#文字列)
- [引数](#引数)

## 基本
```sh
#!/bin/bash

# コメント
# 1行目はシェルの指定
```

## 変数
- シェル変数(そのシェルを閉じると消える)
- 環境変数(ずっと残る)

変数を表示する場合頭に`$`
配列は`${arr[0]}`

### 変数の定義
※ 代入演算子の前後にスペースを入れてはならない
```sh
# シェル変数の定義
number=123
array[0]=10
array[1]=20
# 変数の利用
echo $number
echo $text
echo ${array[0]}
idx=1
echo ${array[$idx]}
"ダブルクォート内での変数展開$number"
```

### export スクリプトをまたぐ変数の利用
環境変数として登録する`export`コマンド
```sh
# 新しく定義して環境変数に追加
export env_num=123
# シェル変数を環境変数に追加
export number
```
`testA.sh`
```sh
#!/bin/bash

xxx=123
export yyy=234
echo xxx=$xxx in testA.sh
echo yyy=$yyy in testA.sh
./testB.sh                # ./testB.shを実行
```
`testB.sh`
```sh
#!/bin/bash

echo xxx=$xxx in testB.sh # 引き継がれない
echo yyy=$yyy in testB.sh # 環境変数
```
ターミナルで`testA.sh`を実行
```sh
$ ./testA.sh
xxx=123 in testA.sh
yyy=234 in testA.sh
xxx= in testB.sh
yyy=234 in testB.sh
```
xxxはシェル変数のため、`testB.sh`が行った処理では反映されていない

### read 標準入力から値を代入
```sh
$ read abc
# 入力を受け付ける
aaabbbccc
$ echo $abc # 入力した値が代入されている
```

### set env unset 変数の確認と削除
`set`
シェル変数を一覧表示する
`env`
環境変数を一覧表示する
`unset 変数`
変数を削除する

```sh
$ set | grep ^abc
abc=aaabbbccc
$ unset abc
$set | grep ^abc
# 表示されない
```

## 文字列
'シングルクォート'
-> 全ての文字を文字列として扱う
"ダブルクォート"
-> 文字列の中で変数展開を行える
`バッククォート`
-> ダブルクォート内でコマンドを実行し、出力を返す
-> 変数として変数展開で呼び出されることもできる

```sh
abc=123
$ echo `single$abc`      # single$abc
$ echo "double$abc"      # double123

$ echo "back`date`"      # back [dateの出力結果]

show_date=`date`         # バッククォートで定義
$ echo "back$show_date"  # back [dateの出力結果]
```

## 引数
実行時に引数を受け付けられる
`args_check.sh`
```sh
#!/bin/bash

echo '$1:' $1; # 1つめ
echo '$2:' $2; # 2つめ
echo '$0:' $0; # 0つめ(コマンド)
echo '$#:' $#; # 引数の数(コマンド除く)
```
実行